//////////////////////////////////////////////////////////////////////////
// FileName:	publicFun.h
// Author:		杨松
// Modified:	2012年5月11日 星期五 
// Purpose:		全局函数的声明
// Comment:		在这里声明了一些全局函数，以便于其他地方使用.
//////////////////////////////////////////////////////////////////////////


#include "StdAfx.h"
#include "DiskScan.h"

#ifndef _PUBLIC_FUN_
#define _PUBLIC_FUN_


//////////////////////////////////////////////////////////////////////////
//获得一个磁盘区域的类型名字
//param	
//		format	磁盘区域的类型，此参数的取值是在stut_connf.h末尾定义
//return 指定类型的描述
//////////////////////////////////////////////////////////////////////////
CString GetPartFormatName( USHORT format);

//////////////////////////////////////////////////////////////////////////
//获得此案的一个区域的名字,如果format表示的是一个NTFS卷或者一个FAT32卷的话
//就启用的第二个和第三个参数,否则第二个第三个参数无效
//param	
//		format		磁盘区域的类型，此参数的取值是在stut_connf.h末尾定义
//		cDevname	当前设备的名字
//		off			要获取区域的名字
//return 指定类型的描述
//////////////////////////////////////////////////////////////////////////
CString GetPartName( USHORT format , const WCHAR* cDevname , LONG_INT off);

//////////////////////////////////////////////////////////////////////////
//将大小的表示方式转换为字符串形式.如512=》512B ,1024=>1KB,
//param
//		size	将要转换的数据的字节数
//return	转好了的字符表示形式
//////////////////////////////////////////////////////////////////////////
CString GetSizeToString(LONG_INT size);
CString GetSizeToString(DWORD size);


//////////////////////////////////////////////////////////////////////////
//十六进制字符串转换到64为数据,转换时从第一个字符开始转化，碰到第一个无效
//字符后返回
//param
//		str		将要转换的数据
//return	转换后的数据
//////////////////////////////////////////////////////////////////////////
LONG_INT HexStrToLONG_INT(CString str);


//////////////////////////////////////////////////////////////////////////
//获取磁盘的不分配的空间的扇区数
//param
//		wParam	是一个CDiskScanView* 
//////////////////////////////////////////////////////////////////////////
//CDiskScanView
DWORD WINAPI GetUnPartableSectorCntThread(PVOID wParam);

//////////////////////////////////////////////////////////////////////////
//获得设备路径中的参数
//param
//		pathName	设备路径名
//		paramType	要获得设备类型 
//						PT_DEVNAME  获得设备的名字
//						PT_INDEX    获得要打开的区域在设备上的区域序号
//						PT_OFFSET   获得区域的偏移
//return 返回获得参数类型
//////////////////////////////////////////////////////////////////////////
CString GetPathParam( CString pathName , int paramType );

//////////////////////////////////////////////////////////////////////////
//从指定的路径中获得指定名字的参数
//param
//		pathName	指定的路径
//		pName		指定参数的名字
//return 如果参数不存在的话返回的是空串，否则返回指定的参数
//////////////////////////////////////////////////////////////////////////
CString GetParamByName(CString pathName , TCHAR* pName);


//////////////////////////////////////////////////////////////////////////
//FAT32卷的的枚举文件的线程函数
//param
//		wParam  CFat32Doc*
//////////////////////////////////////////////////////////////////////////
DWORD WINAPI EnumFAT32File(PVOID wParam);

//////////////////////////////////////////////////////////////////////////
//FAT32卷的的枚举已删除文件的线程函数
//param
//		wParam  CFat32Doc*
//////////////////////////////////////////////////////////////////////////
DWORD WINAPI EnumDelFAT32File(PVOID wParam);


//////////////////////////////////////////////////////////////////////////
//NTFS卷的的枚举文件的线程函数
//param
//		wParam  CNtfsDoc*
//////////////////////////////////////////////////////////////////////////
DWORD WINAPI EnumNtfsFile(PVOID wParam);

//////////////////////////////////////////////////////////////////////////
//获得文件的两个fat链表
//param
//		wParam	CFat32FileAttr*
//////////////////////////////////////////////////////////////////////////
DWORD WINAPI GetFATClustList(PVOID wParam);

//////////////////////////////////////////////////////////////////////////
//复制一个FAT32文件
//param
//		wParam	CCopyProcessDlg*
//////////////////////////////////////////////////////////////////////////
DWORD WINAPI CopyFat32File( PVOID wParam );

//////////////////////////////////////////////////////////////////////////
//复制一个NTFS文件
//param
//		wParam	CCopyProcessDlg*
//////////////////////////////////////////////////////////////////////////
DWORD WINAPI CopyNtfsFile( PVOID wParam );

//////////////////////////////////////////////////////////////////////////
//打开资源管理器定位一个文件
//param
//		wParam=>CStirng* 文件路径
//////////////////////////////////////////////////////////////////////////
DWORD WINAPI PosFileInExplore( PVOID wParam );


//////////////////////////////////////////////////////////////////////////
//获得文件NTFS文件属性名
//param
//		attrType	属性类型 AD_*
//return 属性类型的描述字符串
//		 如果不存在指定的字符串返回空串
//////////////////////////////////////////////////////////////////////////
CString	GetNtfsAttrTypeName( DWORD attrType);


//////////////////////////////////////////////////////////////////////////
//获得FAT32文件的扇区列表
//param
//		wParam=>CFat32Doc*  FAT32文档类
//////////////////////////////////////////////////////////////////////////
DWORD WINAPI GetFAT32FileSectorList( PVOID wParam );


#endif

